<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Haier</title>
  </head>
  <body>
    <div class="haier">
      <div class="haier-header haier__header">
        <div class="haier-header__wrapper">
          <div class="swiper-container haier-header__swiper">
            <div class="swiper-wrapper haier-header__swiper-wrapper" id="haierBanners">
              <div class="swiper-slide header-slide">
                <video
                  class="haier-header__video"
                  playsinline
                  loop="loop"
                  autoplay="autoplay"
                  height="560"
                  muted="muted"
                  poster="https://i.citrus.ua/uploads/brand/haier/preview.jpg"
                  width="1366"
                >
                  <source src="https://i.citrus.ua/uploads/brand/haier/header/1366%D1%85560.mp4" type="video/mp4;" />
                  <source src="https://i.citrus.ua/uploads/brand/haier/header/1366%D1%85560.webm" type="video/webm;" />
                </video>
                <div class="haier-header__container haier-padding">
                  <p class="haier-header__description">
                    Если стиль, то Haier<br />
                    Если Haier, то в Цитрусе
                  </p>
                </div>
              </div>
              <div class="swiper-slide header-slide">
                <img
                  class="haier-header__banner"
                  src="https://i.citrus.ua/uploads/brand/haier/header/prev-v2-ru.jpg?2"
                  alt="preview"
                />
              </div>
            </div>
            <div class="swiper-pagination haier-header__swiper-pagination"></div>
          </div>

          <div class="swiper-button-prev haier-header__swiper-button haier-header__swiper-button--prev"></div>
          <div class="swiper-button-next haier-header__swiper-button haier-header__swiper-button--next"></div>
        </div>
      </div>

      <div class="haier-top haier-container haier__top">
        <div class="haier-top__content haier-padding">
          <p class="haier-category haier-top__category">про haier</p>

          <h1 class="haier-top__title">Haier - бренд №1 в Мире*</h1>

          <p class="haier-top__description">
            Haier — это премиальная бытовая техника, которая вдохновляет дизайном и интеллектом.
          </p>

          <p class="haier-top__description">
            Здесь есть все: стиль, который впишется в любой дизайн, технологии, которые вызывают доверие, и возможность
            управлять техникой со смартфона.
          </p>

          <p class="haier-top__description">
            История Haier начинается в 1984 году в Китае. Компания была создана на базе немецкого производства и
            технологий Liebherr.
          </p>

          <p class="haier-top__note">*По версии Euromonitor International Limited</p>
        </div>

        <div class="haier-top__preview">
          <img src="https://i.citrus.ua/uploads/brand/haier/top/preview.png" alt="preview" />
        </div>
      </div>

      <div class="haier-catalog haier-container haier__catalog">
        <p class="haier-category haier-catalog__category">каталог</p>

        <h2 class="haier-title">Haier в Цитрусе</h2>

        <ul class="haier-catalog__items">
          <li class="haier-catalog__item">
            <a href="https://www.citrus.ua/holodilniki/brand-haier/" target="_blank" class="haier-catalog__item-image">
              <img src="https://i.citrus.ua/uploads/brand/haier/catalog/1.png" alt="preview" />
            </a>

            <a href="https://www.citrus.ua/holodilniki/brand-haier/" target="_blank" class="haier-catalog__item-title"
              >Холодильники</a
            >
          </li>

          <li class="haier-catalog__item">
            <a
              href="https://www.citrus.ua/stiralnye-mashiny/brand-haier/"
              target="_blank"
              class="haier-catalog__item-image"
            >
              <img src="https://i.citrus.ua/uploads/brand/haier/catalog/2.png" alt="preview" />
            </a>

            <a
              href="https://www.citrus.ua/stiralnye-mashiny/brand-haier/"
              target="_blank"
              class="haier-catalog__item-title"
              >Стиральные машины</a
            >
          </li>

          <li class="haier-catalog__item">
            <a
              href="https://www.citrus.ua/duhovye-shkafy/brand-haier/"
              target="_blank"
              class="haier-catalog__item-image"
            >
              <img src="https://i.citrus.ua/uploads/brand/haier/catalog/3.png" alt="preview" />
            </a>

            <a
              href="https://www.citrus.ua/duhovye-shkafy/brand-haier/"
              target="_blank"
              class="haier-catalog__item-title"
              >Духовые шкафы</a
            >
          </li>

          <li class="haier-catalog__item">
            <a
              href="https://www.citrus.ua/actions/vstaivaemaya-bytovaya-tehnika-haier/"
              target="_blank"
              class="haier-catalog__item-image"
            >
              <img src="https://i.citrus.ua/uploads/brand/haier/catalog/4.png" alt="preview" />
            </a>

            <a
              href="https://www.citrus.ua/actions/vstaivaemaya-bytovaya-tehnika-haier/"
              target="_blank"
              class="haier-catalog__item-title"
              >Встраиваемая техника</a
            >
          </li>

          <li class="haier-catalog__item">
            <a
              href="https://www.citrus.ua/actions/esli-haier-to-v-citruse/?segment=8086"
              target="_blank"
              class="haier-catalog__item-image"
            >
              <img src="https://i.citrus.ua/uploads/brand/haier/catalog/5.png" alt="preview" />
            </a>

            <a
              href="https://www.citrus.ua/actions/esli-haier-to-v-citruse/?segment=8086"
              target="_blank"
              class="haier-catalog__item-title"
              >Мелкая бытовая техника</a
            >
          </li>

          <li class="haier-catalog__item">
            <a href="https://www.citrus.ua/televizory/brand-haier/" target="_blank" class="haier-catalog__item-image">
              <img src="https://i.citrus.ua/uploads/brand/haier/catalog/6.png" alt="preview" />
            </a>

            <a href="https://www.citrus.ua/televizory/brand-haier/" target="_blank" class="haier-catalog__item-title"
              >Телевизоры</a
            >
          </li>

          <li class="haier-catalog__item">
            <a
              href="https://www.citrus.ua/noutbuki-i-ultrabuki/brand-haier/"
              target="_blank"
              class="haier-catalog__item-image"
            >
              <img src="https://i.citrus.ua/uploads/brand/haier/catalog/7.png" alt="preview" />
            </a>

            <a
              href="https://www.citrus.ua/noutbuki-i-ultrabuki/brand-haier/"
              target="_blank"
              class="haier-catalog__item-title"
              >Ноутбуки</a
            >
          </li>
          <li class="haier-catalog__item">
            <a
              href="https://www.citrus.ua/kondicionery/brand-haier/"
              target="_blank"
              class="haier-catalog__item-image"
            >
              <img src="https://i.citrus.ua/uploads/brand/haier/catalog/8.png" alt="preview" />
            </a>

            <a href="https://www.citrus.ua/kondicionery/brand-haier/" target="_blank" class="haier-catalog__item-title"
              >Кондиционеры</a
            >
          </li>
        </ul>
      </div>

      <p class="haier-title">Топ-товары Haier</p>

      <div class="haier-info haier-info--first haier-container haier-padding">
        <h2 class="haier-info__title">Топ-холодильники</h2>

        <ul class="haier-info__items">
          <li class="haier-info__item">складные полки и выдвижные морозильные камеры</li>
          <li class="haier-info__item">переключения режима «охлаждение/заморозка» в камерах</li>
          <li class="haier-info__item">
            общая гарантия - 3 года (5 лет при покупке в Haier Shop в Цитрусе), на двигатель - 12 лет
          </li>
          <li class="haier-info__item">антибактериальный турмалиновый модуль (встроенный, не требует замены)</li>
        </ul>
      </div>

      <div class="haier-products">
        <ul class="haier-products__items" id="haierFridgeProducts"></ul>
        <a class="haier-products__show-all" href="https://www.citrus.ua/holodilniki/brand-haier/" target="_blank"
          >посмотреть все</a
        >
      </div>

      <div class="haier-info haier-info--second haier-container haier-padding">
        <h2 class="haier-info__title">Топ-стиральные машины</h2>

        <ul class="haier-info__items">
          <li class="haier-info__item">глубина от 37 см</li>
          <li class="haier-info__item">стирка паром и УФ-обработка барабана</li>
          <li class="haier-info__item">Dual Spray (смыв пены с внутренней стороны дверцы)</li>
          <li class="haier-info__item">
            общая гарантия - 3 года (5 лет при покупке в Haier Shop в Цитрусе), пожизненная гарантия на инверторные
            двигатели
          </li>
        </ul>
      </div>

      <div class="haier-products">
        <ul class="haier-products__items" id="haierWasherProducts"></ul>
        <a class="haier-products__show-all" href="https://www.citrus.ua/stiralnye-mashiny/brand-haier/" target="_blank"
          >посмотреть все</a
        >
      </div>

      <div class="haier-info haier-info--third haier-container haier-padding">
        <h2 class="haier-info__title">Топ-телевизоры</h2>

        <ul class="haier-info__items">
          <li class="haier-info__item">практически незаметные тонкие рамки</li>
          <li class="haier-info__item">официальный Андроид ТВ</li>
          <li class="haier-info__item">голосовое управление и поиск</li>
          <li class="haier-info__item">оперативная память в ТВ от 43 диагонали - 1.5 Гб</li>
        </ul>
      </div>

      <div class="haier-products">
        <ul class="haier-products__items" id="haierTVProducts"></ul>
        <a class="haier-products__show-all" href="https://www.citrus.ua/televizory/brand-haier/" target="_blank"
          >посмотреть все</a
        >
      </div>

      <div class="haier-info haier-info--fifth haier-container haier-padding">
        <h2 class="haier-info__title">Топ-мелкая бытовая техника</h2>

        <ul class="haier-info__items">
          <li class="haier-info__item">выбор температуры нагрева 60-100 °C (чайник HAIER HK-700)</li>
          <li class="haier-info__item">сенсорное управление (ГРИЛЬ HAIER HG-701)</li>
          <li class="haier-info__item">корпус из закаленного стекла или из нержавеющей стали</li>
        </ul>
      </div>

      <div class="haier-products haier-products--fifth">
        <ul class="haier-products__items" id="haierOtherProducts"></ul>
        <a
          class="haier-products__show-all"
          href="https://www.citrus.ua/actions/esli-haier-to-v-citruse/?segment=8086"
          target="_blank"
          >посмотреть все</a
        >
      </div>

      <h2 class="haier-title">Брендовые магазины в Цитрусе</h2>

      <div class="haier-info haier-info--fourth haier-container haier-padding">
        <h2 class="haier-info__title">Haier Shop в Цитрус</h2>

        <p class="haier-info__description">
          Получи дополнительную гарантию (5 лет, вместо 3) при покупке в Haier Shop в Цитрусе
        </p>
      </div>

      <div class="haier-city">
        <ul class="haier-city__items">
          <li class="haier-city__item">
            <p class="haier-city__item-title">Киев</p>
            <p class="haier-city__item-address" data-modal="1">ул. Крещатик, 29 (2 этаж)</p>
          </li>

          <li class="haier-city__item">
            <p class="haier-city__item-title">Одесса</p>
            <p class="haier-city__item-address" data-modal="2">ул. Вице-Адмирала Жукова, 17/19 (2 этаж)</p>
          </li>
        </ul>
      </div>

      <div class="haier-history">
        <p class="haier-title">История</p>

        <div class="haier-history__container">
          <div class="haier-history__preview" id="haierHistoryPreview">
            <img src="https://i.citrus.ua/uploads/brand/haier/history/preview-v2-ru.png?1" alt="preview" />
          </div>
        </div>

        <div class="haier-history__scroll">
          <img src="https://i.citrus.ua/uploads/promo/realme/history/arrow-left.png" alt="" />
          <img src="https://i.citrus.ua/uploads/promo/realme/history/hand.png" alt="" />
          <img src="https://i.citrus.ua/uploads/promo/realme/history/arrow-right.png" alt="" />
        </div>
      </div>

      <div class="haier-video haier-container haier-padding">
        <p class="haier-category haier-video__category">гаджетариум</p>

        <div class="haier-video__video-wrapper">
          <iframe
            class="haier-video__frame"
            width="1134"
            height="637"
            src="https://www.youtube.com/embed/k2L_wp5TmTA"
            title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
      </div>

      <div class="raelme-review__modal review-modal" id="modalAddress" data-close-modal="true">
        <div class="review-modal__videous" id="addressList">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1270.452115055643!2d30.520960070947222!3d50.44288449836017!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x40d4ce55f0433429%3A0xcd8a1763793d4a86!2z0YPQuy4g0JrRgNC10YnQsNGC0LjQuiwgMjksINCa0LjQtdCyLCAwMjAwMA!5e0!3m2!1sru!2sua!4v1619504805426!5m2!1sru!2sua%22  width="600" height="668" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2747.302070228564!2d30.73252011555553!3d46.4823307791262!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x40c631976a9e8d5d%3A0xb2e83b1da79c174a!2z0L_QtdGALiDQktC40YbQtS3QkNC00LzQuNGA0LDQu9CwINCW0YPQutC-0LLQsCwgMTcvMTksINCe0LTQtdGB0YHQsCwg0J7QtNC10YHRgdC60LDRjyDQvtCx0LvQsNGB0YLRjCwgNjUwMDA!5e0!3m2!1sru!2sua!4v1619504865229!5m2!1sru!2sua%22  width="600" height="668" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
          <button class="review-modal__close" data-close-modal="true"></button>
        </div>
      </div>
    </div>
  </body>
  <script>
    (function () {
      if (!window.dataLayer) {
        window.dataLayer = [];
      }

      let globalModalNumber = 0;

      function createScript(url, onloadCb) {
        const bodyElement = document.getElementsByTagName('BODY')[0];
        const scriptContent = document.createElement('script');

        scriptContent.type = 'text/javascript';
        scriptContent.async = false;
        scriptContent.src = url;
        if (onloadCb) {
          scriptContent.onload = onloadCb;
        }
        bodyElement.appendChild(scriptContent);
      }

      function debounce(f, ms) {
        let timer = null;
        return function () {
          let _this = this;
          let onComplete = function () {
            f.apply(_this, arguments);
            timer = null;
          };
          if (timer) {
            clearTimeout(timer);
          }
          timer = setTimeout(onComplete, ms);
        };
      }

      function getDisplay(number) {
        return number == '0' ? 'none' : 'block';
      }

      function getDisplayInline(number) {
        return number == '0' ? 'none' : 'inline-block';
      }

      function getOpacity(number) {
        return number == '0' ? '0' : '1';
      }

      function formatPrice(price) {
        return (price || 0).toLocaleString().replace(/\D+/g, ' ');
      }

      function getProducts(arr, root) {
        root.innerHTML = '';

        const products = arr.map((item) => ({
          ...item,
          category: {
            ...item.category,
            slug:
              item.category.slug[item.category.slug.length - 1] === '/' ? item.category.slug : `${item.category.slug}/`,
          },
        }));

        products.forEach((item) => {
          root.innerHTML += `
                      <li class="haier-products__item">
                          <a class="haier-products__preview" href="https://www.citrus.ua${item.url}" target="_blank">
                            <img src="${item.preview.src}" alt="${item.name}">
                          </a>

                        <a class="haier-products__item-title" href="https://www.citrus.ua${item.url}" target="_blank">
                          ${item.name}
                        </a>

                        <span class="haier-products__percentage" style="display:${getDisplayInline(
                          item.sale.percent,
                        )}">-${item.sale.percent}%</span>

                        <div class="haier-products__price-block">
                          <span class="haier-products__price-old" style="display:${getDisplay(item.prices.old)}">
                            ${formatPrice(item.prices.old)}
                          </span>

                          <span class="haier-products__price-current">
                            ${formatPrice(item.prices.price)} <sub class="haier-products__currency">₴</sub>
                          </span>
                        </div>

                        <p class="haier-products__cashback" style="display:${getDisplay(
                          item.bonus.value,
                        )}">Кешбэк <span class="haier-products__cashback-price">${formatPrice(
            item.bonus.value,
          )} ₴</span></p>
                      </li>`;
        });
      }

      function makeAnimation(elements) {
        let screenHeight;
        let elemToViewPort;

        const timeToDisableAnim = 3000;

        function addAnimation(elem) {
          elem.classList.add('anim');
          elem.setAttribute('data-anim', 'false');

          let timer = setInterval(function () {
            let elemToTop = elem.getBoundingClientRect().top;
            let elemToBottom = elem.getBoundingClientRect().bottom;

            if (elemToBottom <= 0 || elemToTop >= screenHeight) {
              elem.classList.remove('anim');
              elem.setAttribute('data-anim', 'true');

              if (elem.tagName === 'VIDEO') {
                elem.currentTime = 0;
              }

              clearInterval(timer);
              timer = null;
            }
          }, timeToDisableAnim);
        }

        function onScrollAnimate() {
          elements.forEach(function (elem) {
            let elemToTop = elem.getBoundingClientRect().top;
            let elemToBottom = elem.getBoundingClientRect().bottom;

            if (
              ((elemToTop <= elemToViewPort && elemToTop >= 0) ||
                (elemToBottom >= screenHeight / 4 && elemToTop <= 0)) &&
              elem.getAttribute('data-anim') === 'true'
            ) {
              if (!elem.complete && elem.tagName === 'IMG') {
                elem.setAttribute('data-anim', 'false');
                elem.addEventListener('load', function () {
                  addAnimation(elem);
                });

                return;
              }

              if (elem.tagName !== 'IMG') {
                let images = elem.querySelectorAll('img');

                [].forEach.call(images, function (image) {
                  if (!image.complete) {
                    image.addEventListener('load', function () {
                      onScrollAnimate();
                      return;
                    });
                  }
                });
              }

              if (elem.tagName === 'VIDEO') {
                if (elem.readyState !== 4) {
                  onScrollAnimate();
                  return;
                }

                elem.play();
              }

              addAnimation(elem);
            }
          });
        }

        function onResize() {
          screenHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
          elemToViewPort = screenHeight - screenHeight / 4;
        }

        onResize = debounce(onResize, 10);
        onResize();

        onScrollAnimate = debounce(onScrollAnimate, 10);
        onScrollAnimate();

        document.addEventListener('scroll', onScrollAnimate);
        window.addEventListener('resize', onResize);
      }

      function initSwiper() {
        const bannersSwiper = new Swiper('.haier-header__swiper', {
          slidesPerView: 1,
          slidesPerGroup: 1,
          spaceBetween: 0,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      }

      function addMouseScrollEvent(el) {
        let pos = 0,
          active = false,
          mouseMoveHappened = false,
          scrollInterval = null,
          x = 0,
          state = false;

        function animateScroll(scrollTo) {
          let startPosition = el.scrollLeft;
          let stepsCount = 10;
          let stepValue = ((scrollTo - startPosition) / stepsCount) * 3;

          clearInterval(scrollInterval);

          scrollInterval = setInterval(function () {
            el.scrollLeft += stepValue;
            stepsCount -= 1;

            if (stepsCount <= 0) {
              clearInterval(scrollInterval);
            }
          }, 10);
        }

        function onMousedown(e) {
          pos = el.scrollLeft;
          x = e.clientX || e.pageX;
          active = true;
          mouseMoveHappened = false;
          e.preventDefault();
        }

        function onClick(e) {
          active = false;
          if (mouseMoveHappened) {
            e.stopPropagation();
            e.preventDefault();
            state = false;
          }
        }

        function onMousemove(e) {
          if (active) {
            let curX = e.clientX || e.pageX;

            if (Math.abs(x - curX) >= 15) {
              el.scrollLeft = pos - curX + x;
              state = true;
              mouseMoveHappened = true;
            }
          }
        }

        el.addEventListener('mousedown', onMousedown);
        window.addEventListener('mousemove', onMousemove);
        window.addEventListener('click', onClick);
      }

      createScript('https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.0/js/swiper.min.js', () => {
        initSwiper();
      });

      function openModal(event) {
        event.preventDefault();
        
        let addressNumber = +this.getAttribute('data-modal');

        globalModalNumber = addressNumber;

        let modalElement = document.getElementById('addressList');
        console.log(addressNumber);
        modalElement.querySelector(`iframe:nth-child(${addressNumber}), a:nth-child(${addressNumber})`).style.display = 'block';

        let videoModal = document.getElementById('modalAddress');
        videoModal.classList.add('review-modal--show');
      }

      function closeModal(event) {
        if (!event.target.getAttribute('data-close-modal')) {
          return;
        }

        let videoList = document.getElementById('addressList');
        let frames = videoList.querySelectorAll('iframe, .video-review');

        let modalElement = document.getElementById('addressList');
        modalElement.querySelector(`iframe:nth-child(${globalModalNumber})`).style.display = 'none';

        let videoModal = document.getElementById('modalAddress');
        videoModal.classList.remove('review-modal--show');
      }

      let animationImages = document.querySelectorAll('[data-anim]');
      animationImages = [].slice.call(animationImages);
      makeAnimation(animationImages);

      addMouseScrollEvent(document.getElementById('haierHistoryPreview'));

      let modalElements = document.querySelectorAll('[data-modal]');
      [].forEach.call(modalElements, function (element) {
        element.addEventListener('click', openModal);
      });

      let closeModalButtons = document.querySelectorAll('[data-close-modal]');
      [].forEach.call(closeModalButtons, function (button) {
        button.addEventListener('click', closeModal);
      });

      fetch('https://api.citrus.ua/v5/products?segmentId=8170&locale=ru')
        .then((response) => response.json())
        .then((data) => {
          getProducts(data.data, document.getElementById('haierFridgeProducts'));
        });

      fetch('https://api.citrus.ua/v5/products?segmentId=8171&locale=ru')
        .then((response) => response.json())
        .then((data) => {
          getProducts(data.data, document.getElementById('haierWasherProducts'));
        });

      fetch('https://api.citrus.ua/v5/products?segmentId=8172&locale=ru')
        .then((response) => response.json())
        .then((data) => {
          getProducts(data.data, document.getElementById('haierTVProducts'));
        });

      fetch('https://api.citrus.ua/v5/products?segmentId=8173&locale=ru')
        .then((response) => response.json())
        .then((data) => {
          getProducts(data.data, document.getElementById('haierOtherProducts'));
        });
    })();
  </script>
</html>
